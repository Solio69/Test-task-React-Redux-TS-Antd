(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{115:function(e,t,n){e.exports={inputWrapper:"AntInput_inputWrapper__1FO2_","ant-input":"AntInput_ant-input__2ouOV"}},116:function(e,t,n){e.exports={sorting:"Sorting_sorting__1MpOR",sortingText:"Sorting_sortingText__2yOrj"}},140:function(e,t,n){e.exports={usersList:"UsersList_usersList__KaSBr"}},142:function(e,t,n){e.exports={main:"HomePage_main__NSygf"}},233:function(e,t,n){},234:function(e,t,n){"use strict";n.r(t);var a,r=n(0),s=n(25),c=n.n(s),i=n(35),u=n(68),o=n(106),j=n(55),b=n.n(j),l=n(73),p="https://621c7b30768a4e1020ab3244.mockapi.io/api",g=Object(u.b)("users/fetchGetUsers",function(){var e=Object(l.a)(b.a.mark((function e(t,n){var a,r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,r=t?"".concat(p,"/users?name=").concat(t):"".concat(p,"/users"),e.prev=2,e.next=5,fetch(r,{method:"GET",headers:{"Content-Type":"application/json"}});case 5:if((s=e.sent).ok){e.next=8;break}throw new Error("Server error ".concat(s.status,"!"));case 8:return e.next=10,s.json();case 10:return e.abrupt("return",e.sent);case 13:return e.prev=13,e.t0=e.catch(2),e.abrupt("return",a(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,n){return e.apply(this,arguments)}}()),h=Object(u.c)({name:"users",initialState:{usersList:[],searchStr:"",isSorting:"",maxPages:0,activePage:1,elementsOnPage:"5"},reducers:{changeSearchStr:function(e,t){e.searchStr=t.payload},sortingUserList:function(e,t){e.isSorting=t.payload},changesElementsOnPage:function(e,t){e.elementsOnPage=t.payload},changesMaxPages:function(e,t){e.maxPages=t.payload},changesNumPage:function(e,t){e.activePage=t.payload},changesUserData:function(e,t){e.usersList=t.payload}},extraReducers:(a={},Object(o.a)(a,g.pending.type,(function(e){})),Object(o.a)(a,g.fulfilled.type,(function(e,t){e.usersList=t.payload;var n=t.payload.length,a=Number(e.elementsOnPage);a&&(e.maxPages=Math.ceil(n/a))})),Object(o.a)(a,g.rejected.type,(function(e,t){})),a)}),O=h.actions,m=O.changeSearchStr,d=O.sortingUserList,f=O.changesElementsOnPage,x=O.changesNumPage,v=O.changesMaxPages,_=O.changesUserData,y=h.reducer,P=Object(u.a)({reducer:{users:y}}),S=n(99),w=n(15),N=n(132),U=function(){return Object(i.c)((function(e){return e.users}))},k=n(79),I=n(39),C=n(241),T=n(105),L=n(237),E=n(239),A=n(57),B=n(240),D=n(133),M=n(134),W=function(){function e(){Object(D.a)(this,e),this.baseStr="https://621c7b30768a4e1020ab3244.mockapi.io/api"}return Object(M.a)(e,[{key:"putUserUpdate",value:function(){var e=Object(l.a)(b.a.mark((function e(t,n){var a,r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={age:n.age,name:n.name},r={"Content-Type":"application/json"},e.next=4,fetch("".concat(this.baseStr,"/users/").concat(t),{method:"PUT",body:JSON.stringify(a),headers:r});case 4:return s=e.sent,e.abrupt("return",s.json());case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteUser",value:function(){var e=Object(l.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={"Content-Type":"application/json"},e.next=3,fetch("".concat(this.baseStr,"/users/").concat(t),{method:"DELETE",headers:n});case 3:return a=e.sent,e.abrupt("return",a.json());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),F=new W,J=n(50),K=n.n(J),G=(n(156),n(7)),V=function(e){var t=e.id,n=e.name,a=e.age,s=Object(i.b)(),c=U().usersList,u=Object(r.useState)(a),o=Object(I.a)(u,2),j=o[0],b=o[1],l=Object(r.useState)(n),p=Object(I.a)(l,2),h=p[0],O=p[1],m="https://i.pravatar.cc/150?img=".concat(function(e,t){var n=e-.5+Math.random()*(t-e+1);return Math.round(n)}(1,70)),d="/user/".concat(n),f=Object(r.useState)(!1),x=Object(I.a)(f,2),v=x[0],y=x[1],P=function(e){if(e.age!==a||e.name!==n){var r=e;r.id=t,r.age=Number(e.age),F.putUserUpdate(t,r).then((function(e){e.name&&O(e.name),e.age&&b(e.age);var t=Object(k.a)(c).map((function(t){return t.id===e.id?t=e:t}));s(_(t))}))}y(!1)},w=function(){var e=Object(r.useState)([{name:["name"],value:n},{name:["age"],value:a}]),t=Object(I.a)(e,1)[0];return Object(G.jsxs)(L.a,{size:"middle",onFinish:P,fields:t,children:[Object(G.jsx)(L.a.Item,{name:"name",label:"Name:",children:Object(G.jsx)(E.a,{type:"text"})}),Object(G.jsx)(L.a.Item,{name:"age",label:"Age:",children:Object(G.jsx)(E.a,{type:"number"})}),Object(G.jsx)(L.a.Item,{children:Object(G.jsx)(A.a,{type:"primary",htmlType:"submit",children:"Save"})})]})},N=Object(G.jsx)(B.a,{title:"Change user data",visible:v,onCancel:function(){y(!1)},footer:!1,children:Object(G.jsx)(w,{})}),D=Object(G.jsxs)("li",{className:K.a.userPreview,children:[Object(G.jsx)("div",{className:K.a.userAvatarWrapper,children:Object(G.jsx)("img",{src:m,alt:"avatar"})}),Object(G.jsxs)("div",{className:K.a.userInfo,children:[Object(G.jsx)(S.b,{to:d,children:Object(G.jsxs)("div",{className:K.a.userInfoItem,children:["Name:"," ",h]})}),Object(G.jsxs)("div",{className:K.a.userInfoItem,children:["Age:"," ",j]})]}),Object(G.jsxs)("div",{className:K.a.userButton,children:[Object(G.jsxs)("button",{type:"button",className:K.a.userButtonEdit,onClick:function(){y(!0)},children:[Object(G.jsx)(C.a,{}),"Edit"]}),Object(G.jsxs)("button",{type:"button",className:K.a.userButtonDelete,onClick:function(){F.deleteUser(t).then((function(){s(g(""))}))},children:[Object(G.jsx)(T.a,{}),"Delete"]})]})]},t);return Object(G.jsxs)(G.Fragment,{children:[D,N]})},q=n(140),z=n.n(q),R=function(){var e=U(),t=e.usersList,n=e.isSorting,a=e.elementsOnPage,r=e.activePage;var s=function(){var e=Object(k.a)(function(){var e=Object(k.a)(t);return"sortDown"===n?e.sort((function(e,t){return e.age<t.age?1:-1})):"sortUp"===n?e.sort((function(e,t){return e.age>t.age?1:-1})):e}());if(Number(a)){var s=(r-1)*a;return e.splice(s,a)}return e}().map((function(e){return Object(G.jsx)(V,{id:e.id,name:e.name,age:e.age},e.id)}));return Object(G.jsx)("ul",{className:z.a.usersList,children:s})},H=n(115),Q=n.n(H),X=(n(228),function(){var e=Object(i.b)();return Object(G.jsx)("div",{className:Q.a.inputWrapper,children:Object(G.jsx)(E.a,{placeholder:"Search by name",onChange:function(t){var n=t.target.value;n=n.trim().toLowerCase(),e(m(n))},className:Q.a["ant-input"]})})}),Y=n(242),Z=n(243),$=n(116),ee=n.n($),te=function(){var e=Object(i.b)();return Object(G.jsxs)("div",{className:ee.a.sorting,children:[Object(G.jsx)("span",{className:ee.a.sortingText,children:"Sort users by age:"}),Object(G.jsx)("button",{type:"button",onClick:function(){e(d("sortUp"))},children:Object(G.jsx)(Y.a,{})}),Object(G.jsx)("button",{type:"button",onClick:function(){e(d("sortDown"))},children:Object(G.jsx)(Z.a,{})})]})},ne=n(238),ae=n(81),re=n.n(ae),se=(n(235),function(){var e=Object(i.b)(),t=U(),n=t.usersList,a=t.maxPages,s=t.elementsOnPage,c=t.activePage;Object(r.useEffect)((function(){var t=n.length,a=Number(s);e(v(a?Math.ceil(t/s):0))}),[s]);var u=function(t){var n=t.currentTarget.innerText;e(f(n))};return Object(G.jsxs)("div",{className:re.a.pagination,children:[Object(G.jsxs)("div",{className:re.a.paginationSettings,children:[Object(G.jsx)("span",{className:re.a.paginationSettingsText,children:"Show elements per page:"}),Object(G.jsx)("button",{type:"button",onClick:u,children:"5"}),Object(G.jsx)("button",{type:"button",onClick:u,children:"10"}),Object(G.jsx)("button",{type:"button",onClick:u,children:"all"})]}),Object(G.jsx)(ne.a,{total:10*a,current:c,showSizeChanger:!1,onChange:function(t){e(x(t))},className:re.a["ant-pagination"]})]})}),ce=n(142),ie=n.n(ce),ue=function(){var e=Object(i.b)(),t=U(),n=(t.usersList,t.searchStr),a=t.elementsOnPage,s=Object(N.debounce)((function(){return e(g(n))}),500);return Object(r.useEffect)((function(){s()}),[n,a]),Object(G.jsxs)("main",{className:ie.a.main,children:[Object(G.jsx)(X,{}),Object(G.jsx)(te,{}),Object(G.jsx)(R,{}),Object(G.jsx)(se,{})]})},oe=function(){return Object(G.jsx)("div",{children:"UserFull"})},je=function(){return Object(G.jsx)(S.a,{children:Object(G.jsxs)(w.c,{children:[Object(G.jsx)(w.a,{path:"/",element:Object(G.jsx)(ue,{})}),Object(G.jsx)(w.a,{path:"/user/:name",element:Object(G.jsx)(oe,{})})]})})};n(233);c.a.render(Object(G.jsx)(i.a,{store:P,children:Object(G.jsx)(je,{})}),document.getElementById("root"))},50:function(e,t,n){e.exports={userPreview:"UserPreview_userPreview__2j1wJ",userAvatarWrapper:"UserPreview_userAvatarWrapper__3gFn4",userInfo:"UserPreview_userInfo__Gf7-U",userInfoItem:"UserPreview_userInfoItem__2arTw",userButton:"UserPreview_userButton__3QkO4",userButtonEdit:"UserPreview_userButtonEdit__WNwK2",userButtonDelete:"UserPreview_userButtonDelete__KVquk"}},81:function(e,t,n){e.exports={pagination:"AntPagination_pagination__1MbyP",paginationSettings:"AntPagination_paginationSettings__1e6Ad",paginationSettingsText:"AntPagination_paginationSettingsText__2moKf","ant-pagination":"AntPagination_ant-pagination__1jJkq"}}},[[234,1,2]]]);
//# sourceMappingURL=main.58af400b.chunk.js.map